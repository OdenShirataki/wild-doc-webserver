<wd><wd:script>
    wd.result_options.headers={};
    if(wd.input.headers['cookie']){
        wd.general.cookie=((cookie)=>{
            let r=new Object();
            cookie.split(';').forEach(d=>{
                d=d.split('=');
                r[d[0]]=d[1];
            });
            return r;
        })(wd.input.headers['cookie']);
    }else{
        wd.general.cookie=new Object();
    }
    wd.general.get_cookie=(key)=>{
        return wd.general.cookie[key];
    };
    wd.general.session_id=()=>{
        const session_id=wd.general.get_cookie('WDSESSID');
        if(session_id!==void 0 && session_id.length>0){
            return session_id;
        }else{
            const new_session_id=crypto.randomUUID();
            wd.result_options.headers['Set-Cookie']="WDSESSID="+new_session_id+"; path=/; secure";
            return new_session_id;
        }
    };
</wd:script><wd:case
    wd:value="wd.input.post!==void 0"
><wd:when wd:value="true"><wd:include wd:src="'/post/'+wd.input.post['action']+'.xml'" /></wd:when></wd:case><wd:case
    wd:value="wd.result_options.headers['location']===void 0"
><wd:when wd:value="true"><wd:script>
    if(wd.input.uri.match(/^\/-img\//)){
        wd.general.uri='/-img.xml';
    }else{
        wd.general.uri='/doc'+wd.input.uri;
        if(wd.general.uri.match(/\/$/)){
            wd.general.uri+="index.html";
        }
    }
</wd:script><wd:include wd:src="wd.general.uri" /></wd:when></wd:case><wd:script>
    if(wd.result_options.headers['content-type']===void 0){
        wd.result_options.headers['content-type']="text/html; charset=utf-8";
    }
</wd:script></wd>