<wd:search name="admin" collection="admin">
    <field name="name" method="match" wd:value="wd.input.post['name']" />
    <field name="password" method="match" wd:value="wd.input.post['password']" />
</wd:search><wd:result var="admin" search="admin">
    <wd:if wd:value="wd.v('admin').length>0"><wd:for var="r" wd:in="wd.v('admin')">
        <wd:script>
            wd.result_options.headers['location']="/-db/?loggedin";
            wd.general.session_name=wd.general.session_id()+'-login';
        </wd:script><wd:session wd:name="wd.general.session_name">
            <wd:update commit="0">
                <collection name="login">
                    <depend key="admin" collection="admin" wd:row="wd.v('r').row" />
                    <field name="action">login</field>
                </collection>
            </wd:update>
        </wd:session>
    </wd:for></wd:if>
</wd:result>